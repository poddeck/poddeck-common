syntax = "proto3";

package agent;

option java_package = "io.poddeck.common";
option java_multiple_files = true;

message NodeListRequest {
}

message NodeListResponse {
  repeated Node items = 1;
}

message NodeFindRequest {
  string name = 1;
}

message NodeFindResponse {
  bool success = 1;
  Node node = 2;
}

message Node {
  NodeMetadata metadata = 1;
  NodeStatus status = 2;
  repeated NodeEvent events = 3;
}

message NodeMetadata {
  string name = 1;
  map<string, string> labels = 2;
  map<string, string> annotations = 3;
}

message NodeStatus {
  repeated NodeAddress addresses = 1;
  NodeCapacity capacity = 2;
  NodeInfo info = 3;
  repeated NodeCondition conditions = 4;
  int64 age = 5;
}

message NodeAddress {
  string type = 1;
  string address = 2;
}

message NodeCapacity {
  int64 total_cpu = 1;
  int64 total_memory = 2;
  int64 allocated_cpu = 3;
  int64 allocated_memory = 4;
}

message NodeInfo {
  string architecture = 1;
  string os_image = 2;
  string container_runtime_version = 3;
  string kubelet_version = 4;
  string operating_system = 5;
}

message NodeCondition {
  string type = 1;
  string status = 2;
  string reason = 3;
  string message = 4;
  int64 last_heartbeat = 5;
  int64 last_transition = 6;
}

message NodeEvent {
  string type = 1;
  string reason = 2;
  string message = 3;
  int64 timestamp = 4;
  string source = 5;
}